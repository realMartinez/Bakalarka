{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Martin\\\\Documents\\\\React\\\\viterbivisualizer\\\\src\\\\TrellisGraph.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TrellisGraph = ({\n  nodes,\n  links\n}) => {\n  _s();\n  const svgRef = useRef();\n  const [dimensions, setDimensions] = useState({\n    width: 0,\n    height: 0\n  });\n  useEffect(() => {\n    // Function which updates dimensions depending on client\n    const updateDimensions = () => {\n      const width = svgRef.current.parentNode.clientWidth;\n      const height = svgRef.current.parentNode.clientHeight;\n      setDimensions({\n        width,\n        height\n      });\n    };\n    // Sets up initial dimensions and even listener\n    updateDimensions();\n    window.addEventListener(\"resize\", updateDimensions);\n\n    // Cleanup\n    return () => window.removeEventListener(\"resize\", updateDimensions);\n  }, []);\n  useEffect(() => {\n    const {\n      width,\n      height\n    } = dimensions;\n\n    // Edge case if there are no dimension available\n    if (width === 0 || height === 0) return;\n    const svg = d3.select(svgRef.current);\n    svg.attr(\"width\", width).attr(\"height\", height);\n\n    //This clears previous render\n    svg.selectAll(\"*\").remove();\n\n    // Creates array of states from nodes array\n    const uniqueStates = [...new Set(nodes.map(node => node.state))];\n    const xScale = d3.scalePoint().domain(nodes.map(node => node.time)).range([20, width - 20]);\n    const yScale = d3.scalePoint().domain(uniqueStates).range([20, height - 20]);\n\n    // Draw links\n    svg.selectAll(\"line\").data(links).join(\"line\").attr(\"x1\", d => xScale(d.source.time)).attr(\"y1\", d => yScale(d.source.state)).attr(\"x2\", d => xScale(d.target.time)).attr(\"y2\", d => yScale(d.target.state)).attr(\"stroke\", \"black\").attr(\"stroke-width\", 1);\n\n    // Draw Nodes\n    svg.selectAll(\"circle\").data(nodes).join(\"circle\").attr(\"cx\", d => xScale(d.time)).attr(\"cy\", d => yScale(d.state)).attr(\"r\", 5).attr(\"fill\", \"blue\");\n\n    // Label nodes\n    svg.selectAll(\"text\").data(nodes).join(\"text\").attr(\"x\", d => xScale(d.time)).attr(\"y\", d => yScale(d.state) - 10).attr(\"text-anchor\", \"middle\").attr(\"font-size\", \"10px\").text(d => d.state);\n  }, [nodes, links, dimensions]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: svgRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 10\n  }, this);\n};\n_s(TrellisGraph, \"+ItROes5pZdVbiwPTjmz/QMGq9U=\");\n_c = TrellisGraph;\nexport default TrellisGraph;\nvar _c;\n$RefreshReg$(_c, \"TrellisGraph\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","jsxDEV","_jsxDEV","TrellisGraph","nodes","links","_s","svgRef","dimensions","setDimensions","width","height","updateDimensions","current","parentNode","clientWidth","clientHeight","window","addEventListener","removeEventListener","svg","select","attr","selectAll","remove","uniqueStates","Set","map","node","state","xScale","scalePoint","domain","time","range","yScale","data","join","d","source","target","text","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Martin/Documents/React/viterbivisualizer/src/TrellisGraph.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst TrellisGraph = ({ nodes, links }) => {\r\n  const svgRef = useRef();\r\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\r\n\r\n  useEffect(() => {\r\n    // Function which updates dimensions depending on client\r\n    const updateDimensions = () => {\r\n      const width = svgRef.current.parentNode.clientWidth;\r\n      const height = svgRef.current.parentNode.clientHeight;\r\n      setDimensions({ width, height });\r\n    };\r\n    // Sets up initial dimensions and even listener\r\n    updateDimensions();\r\n    window.addEventListener(\"resize\", updateDimensions);\r\n\r\n    // Cleanup\r\n    return () => window.removeEventListener(\"resize\", updateDimensions);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const { width, height } = dimensions;\r\n\r\n    // Edge case if there are no dimension available\r\n    if (width === 0 || height === 0) return;\r\n\r\n    const svg = d3.select(svgRef.current);\r\n    svg.attr(\"width\", width).attr(\"height\", height);\r\n\r\n    //This clears previous render\r\n    svg.selectAll(\"*\").remove();\r\n\r\n    // Creates array of states from nodes array\r\n    const uniqueStates = [...new Set(nodes.map((node) => node.state))];\r\n\r\n    const xScale = d3\r\n      .scalePoint()\r\n      .domain(nodes.map((node) => node.time))\r\n      .range([20, width - 20]);\r\n\r\n    const yScale = d3\r\n      .scalePoint()\r\n      .domain(uniqueStates)\r\n      .range([20, height - 20]);\r\n\r\n    // Draw links\r\n    svg\r\n      .selectAll(\"line\")\r\n      .data(links)\r\n      .join(\"line\")\r\n      .attr(\"x1\", (d) => xScale(d.source.time))\r\n      .attr(\"y1\", (d) => yScale(d.source.state))\r\n      .attr(\"x2\", (d) => xScale(d.target.time))\r\n      .attr(\"y2\", (d) => yScale(d.target.state))\r\n      .attr(\"stroke\", \"black\")\r\n      .attr(\"stroke-width\", 1);\r\n\r\n    // Draw Nodes\r\n    svg\r\n      .selectAll(\"circle\")\r\n      .data(nodes)\r\n      .join(\"circle\")\r\n      .attr(\"cx\", (d) => xScale(d.time))\r\n      .attr(\"cy\", (d) => yScale(d.state))\r\n      .attr(\"r\", 5)\r\n      .attr(\"fill\", \"blue\");\r\n\r\n    // Label nodes\r\n    svg\r\n      .selectAll(\"text\")\r\n      .data(nodes)\r\n      .join(\"text\")\r\n      .attr(\"x\", (d) => xScale(d.time))\r\n      .attr(\"y\", (d) => yScale(d.state) - 10)\r\n      .attr(\"text-anchor\", \"middle\")\r\n      .attr(\"font-size\", \"10px\")\r\n      .text((d) => d.state);\r\n  }, [nodes, links, dimensions]);\r\n\r\n  return <svg ref={svgRef}></svg>;\r\n};\r\n\r\nexport default TrellisGraph;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAO,KAAKC,EAAE,MAAM,IAAI;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzB,MAAMC,YAAY,GAAGA,CAAC;EAAEC,KAAK;EAAEC;AAAM,CAAC,KAAK;EAAAC,EAAA;EACzC,MAAMC,MAAM,GAAGT,MAAM,CAAC,CAAC;EACvB,MAAM,CAACU,UAAU,EAAEC,aAAa,CAAC,GAAGV,QAAQ,CAAC;IAAEW,KAAK,EAAE,CAAC;IAAEC,MAAM,EAAE;EAAE,CAAC,CAAC;EAErEd,SAAS,CAAC,MAAM;IACd;IACA,MAAMe,gBAAgB,GAAGA,CAAA,KAAM;MAC7B,MAAMF,KAAK,GAAGH,MAAM,CAACM,OAAO,CAACC,UAAU,CAACC,WAAW;MACnD,MAAMJ,MAAM,GAAGJ,MAAM,CAACM,OAAO,CAACC,UAAU,CAACE,YAAY;MACrDP,aAAa,CAAC;QAAEC,KAAK;QAAEC;MAAO,CAAC,CAAC;IAClC,CAAC;IACD;IACAC,gBAAgB,CAAC,CAAC;IAClBK,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEN,gBAAgB,CAAC;;IAEnD;IACA,OAAO,MAAMK,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAEP,gBAAgB,CAAC;EACrE,CAAC,EAAE,EAAE,CAAC;EAENf,SAAS,CAAC,MAAM;IACd,MAAM;MAAEa,KAAK;MAAEC;IAAO,CAAC,GAAGH,UAAU;;IAEpC;IACA,IAAIE,KAAK,KAAK,CAAC,IAAIC,MAAM,KAAK,CAAC,EAAE;IAEjC,MAAMS,GAAG,GAAGpB,EAAE,CAACqB,MAAM,CAACd,MAAM,CAACM,OAAO,CAAC;IACrCO,GAAG,CAACE,IAAI,CAAC,OAAO,EAAEZ,KAAK,CAAC,CAACY,IAAI,CAAC,QAAQ,EAAEX,MAAM,CAAC;;IAE/C;IACAS,GAAG,CAACG,SAAS,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC;;IAE3B;IACA,MAAMC,YAAY,GAAG,CAAC,GAAG,IAAIC,GAAG,CAACtB,KAAK,CAACuB,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC;IAElE,MAAMC,MAAM,GAAG9B,EAAE,CACd+B,UAAU,CAAC,CAAC,CACZC,MAAM,CAAC5B,KAAK,CAACuB,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACK,IAAI,CAAC,CAAC,CACtCC,KAAK,CAAC,CAAC,EAAE,EAAExB,KAAK,GAAG,EAAE,CAAC,CAAC;IAE1B,MAAMyB,MAAM,GAAGnC,EAAE,CACd+B,UAAU,CAAC,CAAC,CACZC,MAAM,CAACP,YAAY,CAAC,CACpBS,KAAK,CAAC,CAAC,EAAE,EAAEvB,MAAM,GAAG,EAAE,CAAC,CAAC;;IAE3B;IACAS,GAAG,CACAG,SAAS,CAAC,MAAM,CAAC,CACjBa,IAAI,CAAC/B,KAAK,CAAC,CACXgC,IAAI,CAAC,MAAM,CAAC,CACZf,IAAI,CAAC,IAAI,EAAGgB,CAAC,IAAKR,MAAM,CAACQ,CAAC,CAACC,MAAM,CAACN,IAAI,CAAC,CAAC,CACxCX,IAAI,CAAC,IAAI,EAAGgB,CAAC,IAAKH,MAAM,CAACG,CAAC,CAACC,MAAM,CAACV,KAAK,CAAC,CAAC,CACzCP,IAAI,CAAC,IAAI,EAAGgB,CAAC,IAAKR,MAAM,CAACQ,CAAC,CAACE,MAAM,CAACP,IAAI,CAAC,CAAC,CACxCX,IAAI,CAAC,IAAI,EAAGgB,CAAC,IAAKH,MAAM,CAACG,CAAC,CAACE,MAAM,CAACX,KAAK,CAAC,CAAC,CACzCP,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CACvBA,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;;IAE1B;IACAF,GAAG,CACAG,SAAS,CAAC,QAAQ,CAAC,CACnBa,IAAI,CAAChC,KAAK,CAAC,CACXiC,IAAI,CAAC,QAAQ,CAAC,CACdf,IAAI,CAAC,IAAI,EAAGgB,CAAC,IAAKR,MAAM,CAACQ,CAAC,CAACL,IAAI,CAAC,CAAC,CACjCX,IAAI,CAAC,IAAI,EAAGgB,CAAC,IAAKH,MAAM,CAACG,CAAC,CAACT,KAAK,CAAC,CAAC,CAClCP,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;;IAEvB;IACAF,GAAG,CACAG,SAAS,CAAC,MAAM,CAAC,CACjBa,IAAI,CAAChC,KAAK,CAAC,CACXiC,IAAI,CAAC,MAAM,CAAC,CACZf,IAAI,CAAC,GAAG,EAAGgB,CAAC,IAAKR,MAAM,CAACQ,CAAC,CAACL,IAAI,CAAC,CAAC,CAChCX,IAAI,CAAC,GAAG,EAAGgB,CAAC,IAAKH,MAAM,CAACG,CAAC,CAACT,KAAK,CAAC,GAAG,EAAE,CAAC,CACtCP,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CACzBmB,IAAI,CAAEH,CAAC,IAAKA,CAAC,CAACT,KAAK,CAAC;EACzB,CAAC,EAAE,CAACzB,KAAK,EAAEC,KAAK,EAAEG,UAAU,CAAC,CAAC;EAE9B,oBAAON,OAAA;IAAKwC,GAAG,EAAEnC;EAAO;IAAAoC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AACjC,CAAC;AAACxC,EAAA,CA/EIH,YAAY;AAAA4C,EAAA,GAAZ5C,YAAY;AAiFlB,eAAeA,YAAY;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}